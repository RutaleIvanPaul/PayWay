


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > MainActivity</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.payway.paywaytransactions.app.dashboard.view</a>
</div>

<h1>Coverage Summary for Class: MainActivity (com.payway.paywaytransactions.app.dashboard.view)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">MainActivity</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/13)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/73)
  </span>
</td>
</tr>
  <tr>
    <td class="name">MainActivity$setupObservers$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/7)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">MainActivity$setupObservers$10</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">MainActivity$setupObservers$10$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">MainActivity$setupObservers$10$2</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">MainActivity$setupObservers$2</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">MainActivity$setupObservers$3</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">MainActivity$setupObservers$4</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">MainActivity$setupObservers$5</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">MainActivity$setupObservers$6</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">MainActivity$setupObservers$7</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">MainActivity$setupObservers$8</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/6)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">MainActivity$setupObservers$9</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">MainActivity$setupObservers$9$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/35)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/116)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.payway.paywaytransactions.app.dashboard.view
&nbsp;
&nbsp;import android.app.DatePickerDialog
&nbsp;import androidx.appcompat.app.AppCompatActivity
&nbsp;import android.os.Bundle
&nbsp;import android.view.LayoutInflater
&nbsp;import android.view.MotionEvent
&nbsp;import android.view.View
&nbsp;import android.widget.AdapterView
&nbsp;import android.widget.ArrayAdapter
&nbsp;import android.widget.AutoCompleteTextView
&nbsp;import android.widget.Button
&nbsp;import android.widget.DatePicker
&nbsp;import android.widget.ImageView
&nbsp;import android.widget.MultiAutoCompleteTextView
&nbsp;import android.widget.SeekBar
&nbsp;import androidx.core.view.isVisible
&nbsp;import com.github.mikephil.charting.formatter.IndexAxisValueFormatter
&nbsp;import com.payway.paywaytransactions.App
&nbsp;import com.payway.paywaytransactions.R
&nbsp;import com.payway.paywaytransactions.databinding.ActivityMainBinding
&nbsp;import com.payway.paywaytransactions.databinding.FilterIconLayoutBinding
&nbsp;import com.payway.paywaytransactions.domain.dashboard.usecase.GetLineChartUseCase
&nbsp;import com.payway.paywaytransactions.domain.dashboard.usecase.GetRadarChartUseCase
&nbsp;import com.payway.paywaytransactions.domain.dashboard.util.FilterCriteria
&nbsp;import com.payway.paywaytransactions.domainCore.DateFormatter
&nbsp;import com.payway.paywaytransactions.domainCore.decimalFormat
&nbsp;import java.text.SimpleDateFormat
&nbsp;import java.util.Calendar
&nbsp;import java.util.Date
&nbsp;import java.util.Locale
&nbsp;
<b class="nc">&nbsp;class MainActivity : AppCompatActivity() {</b>
&nbsp;
&nbsp;    private lateinit var binding:ActivityMainBinding
<b class="nc">&nbsp;    val app = App.getInstance()</b>
<b class="nc">&nbsp;    val transactionsViewModel = app.transactionsViewModel</b>
&nbsp;
<b class="nc">&nbsp;    private val filterCriteria = FilterCriteria()</b>
&nbsp;
&nbsp;    override fun onCreate(savedInstanceState: Bundle?) {
<b class="nc">&nbsp;        super.onCreate(savedInstanceState)</b>
<b class="nc">&nbsp;        binding = ActivityMainBinding.inflate(layoutInflater)</b>
<b class="nc">&nbsp;        setContentView(binding.root)</b>
&nbsp;
&nbsp;        //Add toolbar widget to app bar
<b class="nc">&nbsp;        setSupportActionBar(binding.toolbar)</b>
&nbsp;
<b class="nc">&nbsp;        setupClickListeners()</b>
<b class="nc">&nbsp;        setupObservers()</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    private fun setupClickListeners() {
&nbsp;
<b class="nc">&nbsp;        binding.customFilterIcon.setOnClickListener {</b>
<b class="nc">&nbsp;            binding.filterCard.isVisible = !binding.filterCard.isVisible</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        binding.startDateButton.setOnClickListener {</b>
<b class="nc">&nbsp;            showDatePickerDialog(it as Button,true)</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        binding.endDateButton.setOnClickListener {</b>
<b class="nc">&nbsp;            showDatePickerDialog(it as Button,false)</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        binding.clearFilters.setOnClickListener {</b>
&nbsp;            //reset filters and fetch all data
<b class="nc">&nbsp;            binding.startDateButton.text = &quot;&quot;</b>
<b class="nc">&nbsp;            binding.endDateButton.text = &quot;&quot;</b>
<b class="nc">&nbsp;            binding.typeSpinner.setSelection(0)</b>
<b class="nc">&nbsp;            binding.minAmountSeekBar.progress = 0</b>
<b class="nc">&nbsp;            binding.maxAmountSeekBar.progress = 0</b>
<b class="nc">&nbsp;            binding.categoriesSpinner.text.clear()</b>
<b class="nc">&nbsp;            binding.categoriesSpinner.clearFocus()</b>
&nbsp;
<b class="nc">&nbsp;            binding.clearFilters.visibility = View.GONE</b>
&nbsp;
<b class="nc">&nbsp;            transactionsViewModel.getTransactions()</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        binding.applyFiltersButton.setOnClickListener {</b>
<b class="nc">&nbsp;            binding.clearFilters.visibility = View.VISIBLE</b>
&nbsp;            //use filter criteria to select data
&nbsp;            //get selected categories
<b class="nc">&nbsp;            filterCriteria.categories.addAll(binding.categoriesSpinner.text.toString()</b>
<b class="nc">&nbsp;                .split(&quot;,&quot;).map { it.trim()}.filter { it.isNotEmpty() })</b>
<b class="nc">&nbsp;            transactionsViewModel.getFilteredTransactions(filterCriteria)</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    override fun onResume() {
<b class="nc">&nbsp;        super.onResume()</b>
<b class="nc">&nbsp;        transactionsViewModel.getTransactions()</b>
&nbsp;    }
&nbsp;
&nbsp;    private fun setupObservers() {
&nbsp;        //Observe LineData
<b class="nc">&nbsp;        transactionsViewModel.linedata.observe(this) { linedata -&gt;</b>
<b class="nc">&nbsp;            binding.linechart.xAxis.valueFormatter = GetLineChartUseCase.DateAxisFormatter()</b>
<b class="nc">&nbsp;            binding.linechart.data = linedata</b>
<b class="nc">&nbsp;            binding.linechart.setPinchZoom(true)</b>
<b class="nc">&nbsp;            binding.linechart.setScaleEnabled(true)</b>
<b class="nc">&nbsp;            binding.linechart.isHighlightPerDragEnabled = true</b>
<b class="nc">&nbsp;            binding.linechart.isHighlightPerTapEnabled = true</b>
&nbsp;
<b class="nc">&nbsp;            binding.linechart.invalidate()//refresh</b>
&nbsp;        }
&nbsp;
&nbsp;        //Observe PieData
<b class="nc">&nbsp;        transactionsViewModel.pieData.observe(this){piedata -&gt;</b>
<b class="nc">&nbsp;            binding.piechart.data = piedata</b>
<b class="nc">&nbsp;            binding.piechart.invalidate()</b>
&nbsp;        }
&nbsp;
&nbsp;        //Observe Radar Data
<b class="nc">&nbsp;        transactionsViewModel.radarData.observe(this){radardata -&gt;</b>
<b class="nc">&nbsp;            binding.radarchart.xAxis.valueFormatter = IndexAxisValueFormatter(GetRadarChartUseCase.categoryLabels)</b>
<b class="nc">&nbsp;            binding.radarchart.yAxis.valueFormatter = GetRadarChartUseCase.LargeValueFormatter()</b>
<b class="nc">&nbsp;            binding.radarchart.data = radardata</b>
<b class="nc">&nbsp;            binding.radarchart.invalidate()</b>
&nbsp;        }
&nbsp;
&nbsp;        // Observe totalTransactions
<b class="nc">&nbsp;        transactionsViewModel.totalTransactions.observe(this) { totalTransactions -&gt;</b>
<b class="nc">&nbsp;            binding.totalTransactions.text = totalTransactions</b>
&nbsp;        }
&nbsp;
&nbsp;        // Observe totalAmount
<b class="nc">&nbsp;        transactionsViewModel.totalAmount.observe(this) { totalAmount -&gt;</b>
<b class="nc">&nbsp;            binding.totalAmount.text = totalAmount</b>
&nbsp;        }
&nbsp;
&nbsp;        // Observe withdrawAmount
<b class="nc">&nbsp;        transactionsViewModel.withdrawAmount.observe(this) { withdrawAmount -&gt;</b>
<b class="nc">&nbsp;            binding.withdrawAmount.text = withdrawAmount</b>
&nbsp;        }
&nbsp;
&nbsp;        // Observe depositAmount
<b class="nc">&nbsp;        transactionsViewModel.depositAmount.observe(this) { depositAmount -&gt;</b>
<b class="nc">&nbsp;            binding.depositAmount.text = depositAmount</b>
&nbsp;        }
&nbsp;
&nbsp;        //Observe Distinct Categories
<b class="nc">&nbsp;        transactionsViewModel.distinctCategories.observe(this){distinctCategories -&gt;</b>
<b class="nc">&nbsp;            binding.categoriesSpinner.setAdapter(ArrayAdapter(this,android.R.layout.simple_dropdown_item_1line,distinctCategories))</b>
<b class="nc">&nbsp;            binding.categoriesSpinner.setTokenizer(MultiAutoCompleteTextView.CommaTokenizer())</b>
<b class="nc">&nbsp;            binding.categoriesSpinner.setOnTouchListener { _, event -&gt;</b>
<b class="nc">&nbsp;                if (event.action == MotionEvent.ACTION_UP) {</b>
&nbsp;                    // Show the dropdown when the MultiAutoCompleteTextView is clicked
<b class="nc">&nbsp;                    binding.categoriesSpinner.showDropDown()</b>
&nbsp;                }
<b class="nc">&nbsp;                false</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        //Observe Distinct Types
<b class="nc">&nbsp;        transactionsViewModel.distinctTypes.observe(this){distinctTypes -&gt;</b>
<b class="nc">&nbsp;            val typesList = distinctTypes.toMutableList()</b>
<b class="nc">&nbsp;            typesList.add(0,getString(R.string.spinner_prompt))</b>
<b class="nc">&nbsp;            binding.typeSpinner.adapter = ArrayAdapter(this,android.R.layout.simple_spinner_dropdown_item,typesList)</b>
<b class="nc">&nbsp;            binding.typeSpinner.onItemSelectedListener = object : AdapterView.OnItemSelectedListener {</b>
&nbsp;                override fun onItemSelected(p0: AdapterView&lt;*&gt;?, p1: View?, position: Int, p3: Long) {
<b class="nc">&nbsp;                    if (position &gt; 0) {</b>
<b class="nc">&nbsp;                        filterCriteria.type = p0?.getItemAtPosition(position).toString()</b>
&nbsp;                    }
&nbsp;                }
&nbsp;
&nbsp;                override fun onNothingSelected(p0: AdapterView&lt;*&gt;?) {
<b class="nc">&nbsp;                }</b>
&nbsp;
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        //Observe minmax values
<b class="nc">&nbsp;        transactionsViewModel.seekBarMinMax.observe(this){minmax -&gt;</b>
<b class="nc">&nbsp;            binding.minAmountSeekBar.max = (minmax.second - minmax.first).toInt()</b>
<b class="nc">&nbsp;            binding.maxAmountSeekBar.max = (minmax.second - minmax.first).toInt()</b>
&nbsp;
<b class="nc">&nbsp;            binding.minAmountSeekBar.setOnSeekBarChangeListener(object:SeekBar.OnSeekBarChangeListener{</b>
&nbsp;                override fun onProgressChanged(seekBar: SeekBar?, progress: Int, p2: Boolean) {
<b class="nc">&nbsp;                    binding.minAmountSeekBarValue.text = decimalFormat.format(progress+minmax.first)</b>
&nbsp;                }
&nbsp;
&nbsp;                override fun onStartTrackingTouch(p0: SeekBar?) {
<b class="nc">&nbsp;                    binding.seekBarValues.visibility = View.VISIBLE</b>
&nbsp;                }
&nbsp;
&nbsp;                override fun onStopTrackingTouch(seekBar: SeekBar?) {
<b class="nc">&nbsp;                    filterCriteria.minAmount = seekBar?.progress?.plus(minmax.first)?.toDouble()</b>
&nbsp;                }
&nbsp;
&nbsp;            })
&nbsp;
<b class="nc">&nbsp;            binding.maxAmountSeekBar.setOnSeekBarChangeListener(object:SeekBar.OnSeekBarChangeListener{</b>
&nbsp;                override fun onProgressChanged(seekBar: SeekBar?, progress: Int, p2: Boolean) {
<b class="nc">&nbsp;                    binding.maxAmountSeekBarValue.text = decimalFormat.format(progress+minmax.first)</b>
&nbsp;                }
&nbsp;
&nbsp;                override fun onStartTrackingTouch(p0: SeekBar?) {
<b class="nc">&nbsp;                    binding.seekBarValues.visibility = View.VISIBLE</b>
&nbsp;                }
&nbsp;
&nbsp;                override fun onStopTrackingTouch(seekBar: SeekBar?) {
<b class="nc">&nbsp;                    filterCriteria.maxAmount = seekBar?.progress?.plus(minmax.first)?.toDouble()</b>
&nbsp;                }
&nbsp;
&nbsp;            })
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    private fun showDatePickerDialog(clickedButton: Button,isStartDate:Boolean) {
<b class="nc">&nbsp;        val calendar = Calendar.getInstance()</b>
<b class="nc">&nbsp;        val year = calendar.get(Calendar.YEAR)</b>
<b class="nc">&nbsp;        val month = calendar.get(Calendar.MONTH)</b>
<b class="nc">&nbsp;        val day = calendar.get(Calendar.DAY_OF_MONTH)</b>
&nbsp;
<b class="nc">&nbsp;        val datePickerDialog = DatePickerDialog(</b>
<b class="nc">&nbsp;            this,</b>
&nbsp;            DatePickerDialog.OnDateSetListener { view: DatePicker, selectedYear, selectedMonth, selectedDay -&gt;
<b class="nc">&nbsp;                val selectedDate = Calendar.getInstance()</b>
<b class="nc">&nbsp;                selectedDate.set(selectedYear, selectedMonth, selectedDay)</b>
<b class="nc">&nbsp;                updateSelectedDate(selectedDate.time, clickedButton,isStartDate)</b>
&nbsp;            },
<b class="nc">&nbsp;            year,</b>
<b class="nc">&nbsp;            month,</b>
<b class="nc">&nbsp;            day</b>
&nbsp;        )
&nbsp;
<b class="nc">&nbsp;        datePickerDialog.show()</b>
&nbsp;    }
&nbsp;
&nbsp;    private fun updateSelectedDate(date: Date,clickedButton: Button, isStartDate:Boolean) {
<b class="nc">&nbsp;        filterCriteria.apply {</b>
<b class="nc">&nbsp;            if (isStartDate)</b>
<b class="nc">&nbsp;                startDate = date</b>
&nbsp;            else
<b class="nc">&nbsp;                endDate = date</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        val formattedDate = DateFormatter.displayDateFormat.format(date)</b>
<b class="nc">&nbsp;        clickedButton.text = &quot;$formattedDate&quot;</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-01-02 15:15</div>
</div>
</body>
</html>
